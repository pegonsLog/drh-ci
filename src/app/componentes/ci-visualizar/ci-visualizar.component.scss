.ci-visualizar-container {
  padding: 1cm;
  background-color: #e0e0e0; // Fundo um pouco mais escuro para contraste
  font-family: Arial, sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.actions {
  position: fixed;
  top: 2rem;
  right: 2rem;
  z-index: 1000; // Garante que os botões fiquem sobre o conteúdo
  display: flex;
  flex-direction: column; // Empilha os botões verticalmente
  gap: 1rem;
}

.btn-voltar, .btn-gerar-pdf, .btn-imprimir {
  padding: 0.8rem 1.5rem;
  border: none;
  border-radius: 5px;
  color: white;
  cursor: pointer;
  font-size: 1rem;
}

.btn-voltar { background-color: #6c757d; }
.btn-gerar-pdf { background-color: #007bff; }
.btn-imprimir { background-color: #28a745; }

// Novo container para a folha A4 paisagem
.ci-sheet-container {
  display: flex;
  justify-content: space-around;
  background-color: white;
  width: 297mm;
  min-height: 210mm;
  margin: 0;
  padding: 1cm;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  gap: 2cm;
}

.ci-form-wrapper {
  width: 48%; // Cada formulário ocupa quase metade do espaço
}

.ci-form {
  border: 2px solid black; // A borda do formulário em si
  display: flex;
  flex-direction: column;
  height: 100%;
  background-color: white; // Garante que o formulário seja branco
}

// Estilos das seções do formulário
.form-header, .form-to-from, .form-footer {
  display: flex;
  border-bottom: 2px solid black;
}

.form-body {
  font-size: 16px;
  flex-grow: 1; // Ocupa o espaço restante
  padding: 24px;
  min-height: 12cm; // Altura mínima para o corpo da CI
}

// Cabeçalho
.header-title, .header-logo {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8px;
}

.header-title {
  width: 85%;
  font-weight: bold;
  border-right: 2px solid black;
  font-size: 16px;
}

.header-logo {
  width: 15%;
  display: flex;
  align-items: center;
  justify-content: center;

  img {
    max-width: 100%;
    max-height: 45px; // Ajusta a altura máxima do logo
    object-fit: contain; // Mantém a proporção da imagem
  }
}

// Para/De
.form-to-from {
  .address-section {
    width: 85%;
    flex-grow: 1;
    .address-row {
      padding: 8px;
      &:first-child {
        border-bottom: 2px solid black;
      }
      label {
        font-weight: bold;
        margin-right: 5px;
      }
    }
  }

  .area-section {
    border-left: 2px solid black;
    width: 28%;
    .area-row { 
      padding: 8px;
      &:first-child {
        border-bottom: 2px solid black;
      }
       label {
        font-weight: bold;
        margin-right: 5px;
      }
    }
  }
}

// Rodapé
.form-footer {
  .footer-box {
    margin-top: 1rem;
    border-top: 2px solid black;
    width: 50%;
    padding-top: 16px;
    display: flex;
    flex-direction: column;
    justify-content: end;
    align-items: center;

    &:first-child {
      border-right: 2px solid black;
    }

    label {
      font-size: 0.8em;
      color: #555;
      margin-top: 4px;
    }
  }
}

@page {
  size: A4 landscape;
  margin: 0; // Impede que o navegador adicione suas próprias margens.
}

// Media Query para Responsividade em Dispositivos Móveis
@media (max-width: 768px) {
  // Aplica estilos responsivos apenas se o componente não estiver em modo de geração de PDF.
  // Isso garante que o PDF sempre seja gerado com o layout de desktop.
  :host:not(.pdf-generation-mode) {
    .ci-visualizar-container {
      padding: 16px; // Reduz o padding geral em telas menores
    }

    .botoes-container {
      position: static; // Remove o posicionamento flutuante
      display: flex;
      flex-direction: column; // Empilha os botões
      gap: 10px;
      margin-bottom: 20px;
      align-items: stretch; // Estica os botões
    }

    .btn-imprimir,
    .btn-gerar-pdf {
      display: none; // Oculta os botões de ação no mobile
    }

    .ci-sheet-container {
      width: 100%; // Ocupa toda a largura
      min-height: auto; // Altura automática
      flex-direction: column; // Empilha a CI e a cópia
      padding: 16px;
      gap: 20px; // Espaçamento entre original e cópia
      box-shadow: none; // Remove a sombra para uma aparência mais limpa
    }

    .ci-form-wrapper {
      width: 100%; // Cada formulário ocupa a largura total
    }

    .form-body {
      min-height: auto; // Altura do corpo se ajusta ao conteúdo
      padding: 16px;
    }
  }
}

:host(.headless-mode) {
  // Move o componente para fora da tela para que não seja visível,
  // mas ainda possa ser renderizado pelo html2canvas.
  position: absolute;
  top: -9999px;
  left: -9999px;
  z-index: -1; // Garante que fique atrás de outros elementos.
}

@media print {
  // Oculta os botões e outros elementos de UI
  .actions {
    display: none;
  }

  // Reseta o corpo da página para a impressão
  body, html {
    background-color: white;
    margin: 0;
    padding: 0;
  }

  // A SOLUÇÃO ROBUSTA: Desativa o flexbox para evitar o alinhamento vertical na impressão
  .ci-visualizar-container {
    display: block; // Remove o comportamento do flexbox
    background-color: white;
    padding: 0; // Remove o padding da tela
  }

  // Garante que a folha não tenha sombra e seja centralizada horizontalmente
  .ci-sheet-container {
    box-shadow: none;
    margin: 0 auto; // Centraliza na página, sem margem vertical
  }
}
